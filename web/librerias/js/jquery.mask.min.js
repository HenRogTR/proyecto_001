(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery||window.Zepto)}}(function(a){var b=function(f,c,e){var g=this,d;f=a(f);c=typeof c==="function"?c(f.val(),undefined,f,e):c;g.init=function(){e=e||{};g.byPassKeys=[9,16,17,18,36,37,38,39,40,91];g.translation={"0":{pattern:/\d/},"9":{pattern:/\d/,optional:true},"#":{pattern:/\d/,recursive:true},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};g.translation=a.extend({},g.translation,e.translation);g=a.extend(true,{},g,e);f.each(function(){if(e.maxlength!==false){f.attr("maxlength",c.length)}f.attr("autocomplete","off");h.destroyEvents();h.events();h.val(h.getMasked())})};var h={getCaret:function(){var k,m=0,j=f.get(0),i=document.selection,l=j.selectionStart;if(i&&!~navigator.appVersion.indexOf("MSIE 10")){j.focus();k=i.createRange();k.moveStart("character",f.is("input")?-f.val().length:-f.text().length);m=k.text.length}else{if(l||l==="0"){m=l}}return m},setCaret:function(k){var i,j=f.get(0);if(j.setSelectionRange){j.focus();j.setSelectionRange(k,k)}else{if(j.createTextRange){i=j.createTextRange();i.collapse(true);i.moveEnd("character",k);i.moveStart("character",k);i.select()}}},events:function(){f.on("keydown.mask",function(){d=h.val()});f.on("keyup.mask",h.behaviour);f.on("paste.mask drop.mask",function(){setTimeout(function(){f.keydown().keyup()},100)});f.on("change.mask",function(){f.data("changeCalled",true)});f.on("blur.mask",function(j){var i=a(j.target);if(i.prop("defaultValue")!=i.val()){i.prop("defaultValue",i.val());if(!i.data("changeCalled")){i.trigger("change")}}i.data("changeCalled",false)})},destroyEvents:function(){f.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask").removeData("changeCalled")},val:function(i){var j=f.is("input");return arguments.length>0?(j?f.val(i):f.text(i)):(j?f.val():f.text())},behaviour:function(p){p=p||window.event;var o=p.keyCode||p.which;if(a.inArray(o,g.byPassKeys)===-1){var k=h.getCaret(),l=h.val(),m=l.length,n=k<m;var j=h.getMasked(),i=j.length;if(j!==l){h.val(j)}if(n&&!(o===65&&p.ctrlKey)){if(i!=m){if(j.substring(0,k)!=l.substring(0,k)){k=Math.min(k+i-m,i)}}h.setCaret(k)}return h.callbacks(p)}},getMasked:function(w){var n=[],x=h.val(),p=0,t=c.length,y=0,l=x.length,s=1,r="push",o=-1,z,k;if(e.reverse){r="unshift";s=-1;z=0;p=t-1;y=l-1;k=function(){return p>-1&&y>-1}}else{z=t-1;k=function(){return p<t&&y<l}}while(k()){var q=c.charAt(p),j=x.charAt(y),i=g.translation[q];if(i){if(j.match(i.pattern)){n[r](j);if(i.recursive){if(o===-1){o=p}else{if(p===z){p=o-s}}if(z===o){p-=s}}p+=s}else{if(i.optional){p+=s;y-=s}}y+=s}else{if(!w){n[r](q)}if(j===q){y+=s}p+=s}}var u=c.charAt(z);if(t===l+1&&!g.translation[u]){n.push(u)}return n.join("")},callbacks:function(i){var k=h.val(),j=h.val()!==d;if(j===true){if(typeof e.onChange==="function"){e.onChange(k,i,f,e)}}if(j===true&&typeof e.onKeyPress==="function"){e.onKeyPress(k,i,f,e)}if(typeof e.onComplete==="function"&&k.length===c.length){e.onComplete(k,i,f,e)}}};g.remove=function(){h.destroyEvents();h.val(g.getCleanVal()).removeAttr("maxlength")};g.getCleanVal=function(){return h.getMasked(true)};g.init()};a.fn.mask=function(c,d){return this.each(function(){a(this).data("mask",new b(this,c,d))})};a.fn.unmask=function(){return this.each(function(){try{a(this).data("mask").remove()}catch(c){}})};a.fn.cleanVal=function(){return a(this).data("mask").getCleanVal()};a("*[data-mask]").each(function(){var c=a(this),d={};if(c.attr("data-mask-reverse")==="true"){d.reverse=true}if(c.attr("data-mask-maxlength")==="false"){d.maxlength=false}c.mask(c.attr("data-mask"),d)})}));