$(document).ready(function(){$(".auxiliar").addClass("ocultar");$("input, textarea").placeholder();$("#docSerieNumero").mask("S-000-000000").blur(function(a){fFacturaValidar()});$("#tipo").change(function(a){if($(this).val()=="credito"){$("#bLetraCreditoGenerar").prop("disabled","").removeClass("disabled")}else{$("#bLetraCreditoGenerar").prop("disabled","disabled").addClass("disabled")}});$("#fecha").mask("00/00/0000").blur(function(){if(!fValidarFecha(this.value)){this.value=""}});$("#descuento").mask("0999999999999.99").blur(function(a){if(this.value!=""){this.value=fNumeroFormato(this.value,2,false)}else{this.value="0.00"}});$("#codArticuloProducto").mask("#",{maxlength:false}).keypress(function(b){var a=b.charCode?b.charCode:(b.keyCode?b.keyCode:0);if(a==13){if($.isNumeric(this.value)&this.value>0){fAPLeer(this.value)}b.preventDefault()}});$("#cantidad").mask("#",{maxlength:false}).blur(function(a){if(this.value==""){this.value="1"}}).keyup(function(c){var b=c.charCode?c.charCode:(c.keyCode?c.keyCode:0);if(b==13){return}for(var a=1;a<=fCantidadStockItemActual();a++){$("#"+a).prop("checked",false)}if(this.value>fCantidadStockItemActual()){this.value=fCantidadStockItemActual();for(var a=1;a<=fCantidadStockItemActual();a++){$("#"+a).prop("checked",true)}fAlerta("Excedió la cantidad sobre el stock actual, se seleccionara el máximo permitido.")}});$("#precioContadoNuevo").mask("0999999999999.99").blur(function(a){if(this.value!=""){this.value=fNumeroFormato(this.value,2,false)}}).keyup(function(c){var b=c.charCode?c.charCode:(c.keyCode?c.keyCode:0);if(b==13){var a=$("#precioContadoNuevo");if($.isNumeric(a.val())){$("#lPrecioContado").text(fNumeroFormato(a.val(),2,false));$("#dPrecioContadoEditar").dialog("close")}}});$("#precioVenta").mask("0999999999999.99").blur(function(a){if(this.value!=""){this.value=fNumeroFormato(this.value,2,false)}});$("#serieNumero").click(function(a){a.preventDefault()});$("#numeroLetras").mask("#",{maxlength:false}).blur(function(a){if(this.value==""){this.value="1"}}).keyup(function(c){var b=c.charCode?c.charCode:(c.keyCode?c.keyCode:0);if(b==13){return}$("#auxiliarGenerarLetraCredito").val("0");if($.isNumeric(this.value)&&this.value>0){var d=parseInt($("#lNetoLetras").text())-parseInt($("#montoInicial").val());var a=parseInt(this.value);$("#lMontoCuota").text(fNumeroFormato(d/a,2,false))}else{$("#lMontoCuota").text($("#lNetoLetras").text())}});$("#fechaInicio").mask("00/00/0000").blur(function(){if(!fValidarFecha(this.value)){this.value=""}});$("#fechaVencimiento").mask("00/00/0000").blur(function(){if(!fValidarFecha(this.value)){this.value=""}});$("#montoInicial").mask("0999999999999.99").blur(function(a){if(this.value!=""){this.value=fNumeroFormato(this.value,2,false)}else{this.value="0.00"}}).keyup(function(d){var c=d.charCode?d.charCode:(d.keyCode?d.keyCode:0);if(c==13){return}$("#auxiliarGenerarLetraCredito").val("0");if(parseFloat(this.value)>parseFloat($("#lNetoLetras").text())){this.value=$("#lNetoLetras").text();fAlerta("El monto inicial no debe superar el neto de la venta.");return}var b=0;if($.isNumeric(this.value)){b=this.value}if($("#numeroLetras").val()!=""&$("#numeroLetras").val()>0){var e=parseInt($("#lNetoLetras").text(),10)-parseInt(b,10);var a=parseInt($("#numeroLetras").val(),10);$("#lMontoCuota").text(fNumeroFormato(e/a,2,false))}else{$("#lMontoCuota").text($("#lNetoLetras").text())}});$("input[name=periodoLetra]").click(function(c){$("#auxiliarGenerarLetraCredito").val("0");var b=0;switch(this.value){case"mensual":$("#periodoLetra").val("mensual");b=30;break;case"quincenal":$("#periodoLetra").val("quincenal");b=14;break;case"semanal":b=7;$("#periodoLetra").val("semanal");break}var a=$("#fecha").val();var d=fSumarDia(fStringADate(a),b);$("#fechaInicio").val(fDateAString(d));$("#fechaVencimiento").val(a)});$("#bClienteBuscar").click(function(a){$("#clienteBuscar").focus();$("#dClienteBuscar").dialog("open");a.preventDefault()});$("#bVendedorBuscar").click(function(a){$("#vendedorBuscar").focus();$("#dVendedorBuscar").dialog("open");a.preventDefault()});$("#bArticuloProducto").click(function(a){$("#bDAPEditar").prop("disabled",true).addClass("ui-state-disabled");$("#bDAPAgregar").prop("disabled",false).removeClass("ui-state-disabled");$("#bDAPLimpiar").prop("disabled",false).removeClass("ui-state-disabled");$("#lItem").text(parseInt($("#itemCantidad").val(),10)+1);$("#dArticuloProducto").dialog("open");a.preventDefault()});$("#bLetraCreditoGenerar").click(function(a){var b=true;var c="";var d=$("#itemCantidad");if(!$.isNumeric(fCantidadItemActual())||d.val()==0){c+="*Antes agregue articulos.<br>";b=false}var j=$("#lNeto");if(!$.isNumeric(j.text())||j.text()<=0){c+="*El importe neto tiene que ser mayor"+$("lNeto").text()+"<br>";b=false}var h=$("#fecha");if(!fValidarFecha(h.val())){c+="*Primero seleccione fecha de venta o corriga.<br>";b=false}if(!b){fAlerta(c)}else{var i=$("#fecha").val();var e=30;var f=$("input[name=periodoLetra]:checked").val();switch(f){case"mensual":e=30;break;case"quincenal":e=15;break;case"semanal":e=7;break}var g=fSumarDia(fStringADate(i),e);$("#fechaInicio").val(fDateAString(g));$("#fechaVencimiento").val(i);$("#fechaVencimiento").datepicker("option","minDate",i);$("#fechaInicio").datepicker("option","minDate",i);$("#dGenerarLetrasCredito").dialog("open")}a.preventDefault()});$("#bPrecioContadoEditar").click(function(a){$("#lPrecioContadoActual").text($("#lPrecioContado").text());$("#precioContadoNuevo").val("");$("#dPrecioContadoEditar").dialog("open")})});$(function(){$("#fecha").datepicker({changeMonth:true,changeYear:true,numberOfMonths:2});$("#fechaInicio").datepicker({changeMonth:true,changeYear:true,numberOfMonths:3}).datepicker("option","minDate",$("#fecha").val());$("#fechaVencimiento").datepicker({changeMonth:true,changeYear:true,numberOfMonths:2}).datepicker("option","minDate",$("#fecha").val());$("#dVentaRegistrarExito").dialog({autoOpen:false,modal:true,resizable:true,height:150,width:350,buttons:{Ver:function(){$(location).attr("href","../sVenta?accionVenta=mantenimiento&codVenta="+$("#codVenta").val())},"Registrar otro":function(){$(this).dialog("close")}}});$("#dClienteBuscar").dialog({autoOpen:false,modal:true,resizable:true,height:100,width:800,close:function(){fFacturaValidar()}});$("#dVendedorBuscar").dialog({autoOpen:false,modal:true,resizable:true,height:100,width:800,close:function(){}});$("#dArticuloProducto").dialog({autoOpen:false,modal:true,resizable:true,height:550,width:1100,buttons:[{id:"bDAPLimpiar",text:"Limpiar",click:function(a){}},{id:"bDAPAgregar",text:"Agregar",click:function(a){if(fArticuloProductoValidar()){fArticuloProductoAgregar()}}},{id:"bDAPEditar",text:"Editar",click:function(a){}}],close:function(){}});$("#dPrecioContadoEditar").dialog({autoOpen:false,modal:true,resizable:true,height:180,width:450,buttons:{Modificar:function(){var a=$("#precioContadoNuevo");if($.isNumeric(a.val())){$("#lPrecioContado").text(a.val())}else{$("#lPrecioContado").text("0.00")}$(this).dialog("close")},Cancelar:function(){$(this).dialog("close")}},close:function(){$(this).dialog("close")}});$("#dItemAccionDobleClic").dialog({autoOpen:false,modal:true,resizable:true,height:250,width:600,buttons:{Editar:function(){fAlerta("Función en desarrollo")},Eliminar:function(c){var b=$("#itemCantidadAux");var a=$("#itemCantidad");if(parseInt(b.val())==parseInt(a.val())){$("#trArticuloProducto"+a.val()).remove();a.val(parseInt(a.val())-1);fCalcularImportes()}else{fAlerta("Para eliminar, tiene que hacerlo desde el último agregado.")}$("#dItemAccionDobleClic").dialog("close");c.preventDefault()},Cerrar:function(){$(this).dialog("close")}}});$("#dGenerarLetrasCredito").dialog({autoOpen:false,modal:true,resizable:true,height:570,width:600,buttons:{"Generar letras":function(){if(fLetrasCreditoValidar()){fLetrasCreditoGenerar()}},Aceptar:function(){if($("#auxiliarGenerarLetraCredito").val()=="0"){fAlerta("Genere las letras de credito");return}$(this).dialog("close")}},close:function(){}});$("#dVentaRegistrarConfirmar").dialog({autoOpen:false,modal:true,resizable:true,height:600,width:800,buttons:{Cancelar:function(){$(this).dialog("close")},Continuar:function(){fVentaRegistrar()}}});$("#clienteBuscar").autocomplete({source:"autocompletado/clienteLeer.jsp",minLength:4,select:clienteSeleccionado,focus:clienteCMarcado});$("#vendedorBuscar").autocomplete({source:"autocompletado/cobradorVendedorLeer.jsp",minLength:4,select:vendedorSeleccionado,focus:vendedorMarcado});$("#descripcion").autocomplete({source:"autocompletado/articuloProductoDescripcion.jsp",minLength:4,select:fAPSeleccionado,focus:fAPMarcado});$("#formVentaRegistrar").validate({submitHandler:function(){if(fVentaRegistrarVerificar()){fVentaRegistrarConfirmar()}else{return}},onkeyup:function(a){$(a).valid()},rules:{docSerieNumero:{required:true,remote:"validacion/ventasVerificarDocSerieNumero.jsp"},tipo:"required",fecha:{required:true,dateITA:true},moneda:"required"},messages:{docSerieNumero:{remote:"El documento ya está usado."},tipo:"Seleccione <strong>TIPO</strong> de venta",moneda:"Seleccione <strong>MONEDA</strong>",fecha:{dateITA:"Ingrese un formato de fecha correcta"}}})});function fAPLeer(d){var c={codArticuloProducto:d};var a="ajax/articuloProductoLeer.jsp";try{$.ajax({type:"post",url:a,data:c,error:function(e,g,f){$("#lServidorError").text(f+"()");$("#dServidorError").dialog("open")},success:function(f,h){fArticuloProductoReiniciar();var g=procesarRespuesta(f);if(g.length==0){fAlerta("Artículo no encontrado")}else{var e=g[0];$("#lStock").text(e.stock);$("#codArticuloProducto").val(e.codArticuloProducto);$("#descripcion").val(e.descripcion);$("#lPrecioContado").text(e.precioVenta);$("#precioVenta").val(e.precioVenta);$("#lUnidadMedida").text(e.unidadMedida);$("#serieNumero").prop("checked",e.usarSerieNumero?"checked":"");if(e.stock<1){fAlerta("No hay articulo en stock.")}if(e.usarSerieNumero){$("#dSerieNumero").removeClass("ocultar");fSerieNumeroStock(d)}}},statusCode:{404:function(){$("#lServidorError").text("Página no encontrada().");$("#dServidorError").dialog("open")}}})}catch(b){$("#lServidorError").text(b);$("#dServidorError").dialog("open")}}function fSerieNumeroStock(d){var c={codArticuloProducto:d,codAlmacen:1};var a="ajax/serieNumeroStockLeer.jsp";try{$.ajax({type:"post",url:a,data:c,error:function(e,g,f){$("#lServidorError").text(f+"()");$("#dServidorError").dialog("open")},success:function(g,j){var e=procesarRespuesta(g);for(var f=1;f<=e.length;f++){var h=e[f-1];$("#tSerieNumero").append('<tr><td  class="ancho40px centrado"><input type="hidden"  id="codKardexSerieNumero'+f+'" value="'+h.codKardexSerieNumero+'"/><input type="checkbox" name="cSerieNumero" id="'+f+'"/></td><td class="ancho400px"><label id="serieNumero'+f+'" for="'+f+'">'+h.serieNumero+'</label></td><td><label id="serieNumeroObservacion'+f+'" for="'+f+'">'+h.observacion+"</label></td></tr>");$("#"+f).bind("click",function(l){var i=0;for(var k=1;k<=fCantidadStockItemActual();k++){if($("#"+k).is(":checked")){i++}}if(i>fCantidadItemActual()){fAlerta("Se ha sobrepasado la cantidad de series.");l.preventDefault()}})}},statusCode:{404:function(){$("#lServidorError").text("Página no encontrada().");$("#dServidorError").dialog("open")}}})}catch(b){$("#lServidorError").text(b);$("#dServidorError").dialog("open")}}function clienteSeleccionado(b,c){var a=c.item.value;$("#clienteBuscar").val("");$("#lClienteNombresC").text(a.nombresC);$("#codPersona").val(a.codPersona);$("#codCliente").val(a.codCliente);$("#lClienteDireccion").text(a.direccion);$("#lClienteDniPasaporte").text(a.dniPasaporte);$("#lClienteRuc").text(a.ruc);$("#lClienteCreditoMax").text(a.creditoMax);$("#lClienteEmpresaConvenio").text(a.empresaConvenio);$("#lClienteCondicion").text(a.condicion);$("#dClienteBuscar").dialog("close");b.preventDefault()}function clienteCMarcado(b,c){var a=c.item.value;$("#clienteBuscar").val(a.nombresC);b.preventDefault()}function vendedorSeleccionado(b,c){var a=c.item.value;$("#vendedorBuscar").val("");$("#lVendedorNombresC").text(a.nombresC);$("#codVendedor").val(a.codPersona);$("#dVendedorBuscar").dialog("close");b.preventDefault()}function vendedorMarcado(b,c){var a=c.item.value;$("#vendedorBuscar").val(a.nombresC);b.preventDefault()}function fAPSeleccionado(a,b){var c=b.item.value;$("#descripcionBuscar").val("");$("#codArticuloProductoBuscar").val("");fAPLeer(c.codArticuloProducto,"");$("#dAPBuscar").dialog("close");a.preventDefault()}function fAPMarcado(a,b){var c=b.item.value;$("#descripcionBuscar").val(c.descripcion);$("#codArticuloProductoBuscar").val(c.codArticuloProducto);a.preventDefault()}function fCantidadStockItemActual(){return parseInt($("#lStock").text(),10)}function fCantidadItemActual(){var a=$("#cantidad").val();if(!$.isNumeric(a)){return 0}else{return a}}function fVentaRegistrarVerificar(){var b=true;var a="<strong>ERROR(ES) EN REGISTRO DE VENTA</strong><br>";if($("#codPersona").val()==""){a+="*Seleccione cliente<br>";b=false}if($("#codVendedor").val()==""){a+="*Seleccione vendedor<br>";b=false}if($("#itemCantidad").val()=="0"){a+="*Seleccione al menos un artículo para realizar la venta.<br>";b=false}if($("#tipo").val()=="credito"){if($("#auxiliarGenerarLetraCredito").val()=="0"){a+="*Primero genere las letras de credito.<br>";b=false}}if(!b){fAlerta(a)}return b}function fVentaRegistrar(){$("#dVentaRegistrarConfirmar").dialog("close");var c=$("#formVentaRegistrar");var d=c.serialize()+"&accionVenta=registrar";var a=c.attr("action");try{$.ajax({type:"post",url:a,data:d,beforeSend:function(){$("#trBoton").addClass("ocultar");fProcesandoPeticion("Registrando venta.")},error:function(e,g,f){$("#lServidorError").text(f+"()");$("#dServidorError").dialog("open")},success:function(e,f){$("#trBoton").removeClass("ocultar");$("#dProcesandoPeticion").dialog("close");if($.isNumeric(e)){fVentaReiniciar();fArticuloProductoReiniciar();$("#dVentaRegistrarExito").dialog("open")}else{fAlerta(e)}},statusCode:{404:function(){$("#lServidorError").text("Página no encontrada().");$("#dServidorError").dialog("open")}}})}catch(b){$("#lServidorError").text(b);$("#dServidorError").dialog("open")}}function fFacturaValidar(){var a=$("#docSerieNumero").val();if(a.substring(0,1)=="F"&&$("#codPersona").val()!=""&&$("#lClienteRuc").text()==""){fAlerta("El cliente no tiene <strong>RUC</strong> para asignar este tipo de documento (<strong>FACTURA</strong>), se recomienda...<br>*Actualizar el dato del cliente.<br>*Ingresar el comprobante correcto.<br>... por segurida se procedera a reiniciar el campo del comprobante.");$("#docSerieNumero").val("")}}function fArticuloProductoAgregar(){var g=$("#lItem");var b=$("#cantidad");var d=$("#codArticuloProducto");var a=$("#descripcion");var e=$("#lUnidadMedida");var h=$("#lPrecioContado");var j=$("#precioVenta");$("#tbArticuloProducto").append('<tr id="trArticuloProducto'+g.text()+'"><td class="derecha"><span id="lItem'+g.text()+'" class="vaciar">'+g.text()+'</span></td><td class="derecha"><input type="text" name="codArticuloProducto'+g.text()+'" id="codArticuloProducto'+g.text()+'" value="'+d.val()+'" class="limpiar ocultar" /><span id="lCodArticuloProducto'+g.text()+'" class="vaciar">'+d.val()+'</span></td><td class="derecha"><input type="text" name="cantidad'+g.text()+'" id="cantidad'+g.text()+'" value="'+parseInt(b.val(),10)+'" class="limpiar ocultar" /><span id="lCantidad'+g.text()+'" class="vaciar">'+parseInt(b.val(),10)+'</span></td><td class="derecha"><span id="lUnidad'+g.text()+'" class="vaciar">'+e.text()+'</span></td><td class="izquierda"><span id="lDescripcion'+g.text()+'" class="vaciar" title="'+g.text()+'">'+a.val()+'</span><div id="dSerieNumeroMostrar'+g.text()+'" style="padding-left: 15px;"></div><div id="dSerieNumero'+g.text()+'"></div></td><td class="derecha"><input type="text" name="precioContado'+g.text()+'" id="precioContado'+g.text()+'" value="'+fNumeroFormato(h.text(),2,false)+'" class="limpiar ocultar" /><input type="text" name="precioVenta'+g.text()+'" id="precioVenta'+g.text()+'" value="'+fNumeroFormato(parseFloat(j.val()),2,false)+'" class="limpiar ocultar" /><span id="lPrecioVenta'+g.text()+'" class="vaciar">'+fNumeroFormato(parseFloat(j.val()),2,false)+'</span></td><td class="derecha"><input type="text" name="precioTotal'+g.text()+'" id="precioTotal'+g.text()+'" value="'+fNumeroFormato(parseFloat(j.val())*parseInt(b.val(),10),2,false)+'" class="limpiar ocultar"/><span id="lPrecioTotal'+g.text()+'" class="vaciar">'+fNumeroFormato(parseFloat(j.val())*parseInt(b.val(),10),2,false)+"</span></td></tr>");if(fSerieNumeroEstado()){var f=1;for(var c=1;c<=fCantidadStockItemActual();c++){if($("#"+c).is(":checked")){$("#dSerieNumeroMostrar"+g.text()).append($("#serieNumero"+c).text()+"&nbsp;&nbsp;&nbsp;&nbsp;");$("#dSerieNumero"+g.text()).append('<input type="text" name="item'+g.text()+"codKardexSerieNumero"+f+'" value="'+$("#codKardexSerieNumero"+c).val()+'" class="ocultar"/>');f++}}}$("#lDescripcion"+g.text()).bind("dblclick",function(i){var k=$(this).attr("title");$("#itemCantidadAux").val(k);$("#lItemMostrar").text(k);$("#lDescripcionMostrar").text($("#lDescripcion"+k).text());$("#dItemAccionDobleClic").dialog({title:"Item "+k}).dialog("open");i.preventDefault()});$("#itemCantidad").val(parseInt(g.text()),10);$("#lItem").text(parseInt($("#itemCantidad").val(),10)+1);fArticuloProductoReiniciar();fCalcularImportes();$("#codArticuloProducto").focus()}function fArticuloProductoValidar(){var h=true;var e="<strong>CORRIGA EL(LOS ) SIGUIENTE(S) ERROR(ES)</strong><br>";var b=$("#codArticuloProducto");if(!b.length||b.val()<=0||b.val()==""){e+="*No hay código de producto agregado.<br>";h=false}var c=$("#cantidad");if(!c.length||c.val()<1||c.val()==""){e+="*Mínimo un artículo.<br>";h=false}var f=$("#descripcion");if(!f.length||f.val()<1||f.val()==""){e+="*Descripción de articulo esta vacio, corregir.<br>";h=false}var g=$("#precioVenta");if(!g.length||!$.isNumeric(g.val())){e+="*Ingrese precio de venta.<br>";h=false}if(fSerieNumeroEstado()){var a=0;for(var d=1;d<=fCantidadStockItemActual();d++){if($("#"+d).is(":checked")){a++}}if(a<fCantidadItemActual()){e+="*Seleccione la misma cantidad de series a vender.<br>";h=false}}if(fCantidadStockItemActual()<=0){e+="*No hay stock del producto a vender.<br>";h=false}if(!h){fAlerta(e)}return h}function fSerieNumeroEstado(){var a=false;if($("#serieNumero").is(":checked")){a=true}return a}function fCalcularImportes(){var e=0;var g=parseInt($("#itemCantidad").val(),10);for(var d=1;d<=g;d++){e=parseFloat(e)+parseFloat($("#precioTotal"+d).val())}$("#lSubTotal").text(fNumeroFormato(e,2,false));var f=0;var a=0;var j=$("#descuento");if($.isNumeric(j.val())){a=parseFloat(j.val())}f=e-a;$("#lTotal").text(fNumeroFormato(f,2,false));var c=0;var h=$("#lMontoIgv");if($.isNumeric(h.val())){c=parseFloat(h.val())}var b=f*(1+c);$("#auxiliarGenerarLetraCredito").val("0");$("#lNeto").text(fNumeroFormato(b,2,false));$("#lNetoLetras").text(fNumeroFormato(b,2,false));$("#lMontoCuota").text(fNumeroFormato(b,2,false));$("#numeroLetras").val("1")}function fLetrasCreditoValidar(){var e=true;var b="";var a=$("#numeroLetras");var d=$("#fechaInicio");var c=$("#fechaVencimiento");if(!$.isNumeric(a.val())||a.val()<1){b+="*El numero de letra debe ser mayor a 0<br>";e=false}if(!d.length||!fValidarFecha(d.val())){b+="*Ingrese fecha inicio<br>";e=false}if(!c.length||!fValidarFecha(c.val())){b+="*Ingrese fecha vencimiento - formato de f. de vencimiento incorrecto.<br>";e=false}if(!e){fAlerta(b)}return e}function fLetrasCreditoGenerar(){var c={neto:$("#lNetoLetras").text(),inicial:$("#montoInicial").val(),numeroCuotas:$("#numeroLetras").val(),fechaInicio:$("#fechaInicio").val(),fechaVencimiento:$("#fechaVencimiento").val(),periodoLetra:$("#periodoLetra").val()};var a="ajax/letraCreditoGenerar.jsp";try{$.ajax({type:"post",url:a,data:c,error:function(d,f,e){$("#lServidorError").text(e+"()");$("#dServidorError").dialog("open")},success:function(h,j){var g=procesarRespuesta(h);var d=$("#tbDetalleLetras");if(!g){fAlerta("Error al generar las letras-"+h)}else{var f;d.empty();for(var e=0;e<g.length;e++){f=g[e];if(e==1){$("#lMostrar8").text(f.monto)}d.append('<tr><td style="width: 33%;">'+f.letra+'</td><td style="width: 35%;">'+f.fechaVencimiento+"</td><td>"+f.monto+"</td></tr>")}$("#auxiliarGenerarLetraCredito").val("1");$("#cantidadLetras").val($("#numeroLetras").val());$("#fechaInicioLetras").val($("#fechaInicio").val());$("#montoInicialLetra").val($("#montoInicial").val());$("#fechaVencimientoInicial").val($("#fechaVencimiento").val())}},statusCode:{404:function(){$("#lServidorError").text("Página no encontrada(letraCreditoGenerar.jsp).");$("#dServidorError").dialog("open")}}})}catch(b){$("#lServidorError").text(b);$("#dServidorError").dialog("open")}}function fArticuloProductoReiniciar(){$("#lStock").text("");$("#codArticuloProducto").val("");$("#descripcion").val("");$("#lPrecioContado").text("0.00");$("#precioVenta").val("");$("#lUnidadMedida").text("");$("#serieNumero").prop("checked","");$("#cantidad").val("1");$("#tSerieNumero").empty();$("#dSerieNumero").addClass("ocultar")}function fVentaReiniciar(){$("#bLetraCreditoGenerar").prop("disabled","disabled").addClass("disabled");$(".limpiar").val("");$(".vaciar").empty();$("#fecha").val($("#fechaAux").val());$("#moneda").val("soles");$("#itemCantidad").val("0");$("#auxiliarGenerarLetraCredito").val("0");$("#periodoLetra").val("mensual");$("#cantidadLetras").val("1");var a=$("#fecha").val();$("#fechaInicioLetras").val(fDateAString(fSumarDia(fStringADate(a),30)));$("#montoInicialLetra").val("0");$("#fechaVencimientoInicial").val(a);$("#descuento").val("0.00")}function fPaginaActual(){fVentaReiniciar()}function fVentaRegistrarConfirmar(){var c=$("#dVentaRegistrarConfirmar");c.find(".vaciar").empty();$("#lMostrar1").text($("#docSerieNumero").val());$("#lMostrar2").text($("#tipo option:selected").text());$("#lMostrar3").text($("#fecha").val());$("#trMostrarVC").addClass("ocultar");if($("#tipo").val()=="credito"){$("#trMostrarVC").removeClass("ocultar");$("#lMostrar4").text($("#montoInicialLetra").val());$("#lMostrar5").text($("#fechaVencimientoInicial").val());$("#lMostrar6").text($("#cantidadLetras").val());$("#lMostrar7").text($("#periodoLetra").val().toUpperCase());$("#lMostrar9").text($("#fechaInicioLetras").val())}$("#lMostrar10").text($("#lClienteNombresC").text());$("#lMostrar11").text($("#lVendedorNombresC").text());$("#lMostrar12").text($("#lNeto").text());var b=$("#itemCantidad").val();for(var a=1;a<=b;a++){$("#tbAPMostrar").append('<tr><td class="derecha">'+$("#lItem"+a).text()+'</td><td class="derecha">'+$("#lCodArticuloProducto"+a).text()+"</td><td>"+$("#lDescripcion"+a).text()+'</td><td class="derecha">'+$("#lPrecioTotal"+a).text()+"</td></tr>")}c.dialog("open")};